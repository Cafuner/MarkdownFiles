# 树的直径



树的直径是指树中最长路径的长度。

关于树的直径有下面的定理：

1. 一棵树可能有多条直径，但所有的直径拥有相同的中点。如果直径上的顶点数为奇数，那么最中间的顶点就是中点。如果直径上的顶点数为偶数，那么最中间的两个顶点均是中点。

    证明：反证法。假设有两条直径，它们的中点分别为a和b，且a和b不同。由于树是联通图，那么a到b的长度为d，于是我们可以用下面这3段构造一条更长的路径：以a为中点的直径的一半，从a到b，以b为直径的一半。这与假设的两条直径矛盾。所以所有的直径中点相同。

2. 从任意一顶点u出发，搜索距离u最远的顶点v，则v是某一条直径的一个端点。

    证明：反证法。假设有一个条直径，端点分别为a和b，且a和b不等于v。那么我们找到u与这条直径的唯一相交的节点x。由于v是距离u最远的点，所以u到v的距离一定大于等于u到b的距离。那么u到v的距离加上u到x的距离更是大于x到b的距离。此时我们可以构造一条更长的路径，即从a出发，经过x，u到达v，这一定比a到b要长，与假设矛盾。因此v一定是某一条直径的一个端点。

于是可以这样求树的直径：

## 1. 两次DFS/BFS

先随机取一个顶点作为根节点u，然后使用DFS或者BFS搜索出距离u最远的叶子节点v。此时v一定是某一条直径的一个端点。然后再以v作为根节点，再进行一次DFS/BFS，搜索出距离v最远的节点x，那么从v到x就是一条直径。



## 衍生问题-最小高度树

如果要选择一个结点作为根节点，使得生成的树的高度最小，该如何选择呢？

显然，要使得最终树的高度最小，就要用树的直径的中点作为根节点，这样树的高度就是$\lceil \frac{直径}{2}\rceil$ 。可以证明，以任意其他节点作为根节点，其高度都将大于该值。注意，这里直径的中点可能是1个，也可能是2个。

















